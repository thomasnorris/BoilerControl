
// global.requireLocal = require('name-of-this-file').GetModule;
// --Call with requireLocal('file-to-get') to automatically get the right file

var _fs = require('fs');
var _paths;

var _outerFunc = module.exports = {
	GetModule: function(name) {
		if (!_paths)
			GetAllFilePaths();

		var path = _paths.filter((el) => {
			return el.toLowerCase().includes(name.toLowerCase());
		}).toString();

		return require(path);

		function GetAllFilePaths() {

			var _rootDir = '../bin';
			_paths = ScanDirectory(__dirname + '/' + _rootDir);

			function ScanDirectory(dir) {
				var results = [];
				var list = _fs.readdirSync(dir);
				list.forEach((file) => {
					file = dir + '/' + file;
					var stat = _fs.statSync(file);
					if (stat && stat.isDirectory())
						results = results.concat(ScanDirectory(file));
					else
						results.push(file);
				});
				return results;
			}
		}
	}
}